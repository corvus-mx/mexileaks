---
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/Header.astro';
import Footer from '../../../components/Footer.astro';
import { getLeakById } from '../../../data/leaks';

const leak = getLeakById('caso-001');

if (!leak) {
  return Astro.redirect('/404');
}
---

<Layout 
  title={`${leak.title} - CORVUS MexiLeaks`}
  description={leak.summary}
>
  <Header showBackLink={true} />
  
  <main class="flex-1 py-8 lg:py-12">
    <div class="container">
      <article class="max-w-4xl mx-auto">
        <!-- Article header -->
        <header class="mb-12">
          <div class="flex flex-wrap items-center gap-4 mb-6">
            <div class="flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-full">
              <span class="nf text-sm">󰖟</span>
              <span class="text-sm font-bold uppercase tracking-wide">{leak.category}</span>
            </div>
            {leak.verified && (
              <div class="flex items-center gap-1 bg-green-600 text-white px-3 py-1 rounded-full">
                <span class="nf text-sm">󰄬</span>
                <span class="text-sm font-bold">Verificado</span>
              </div>
            )}
            <time class="text-gray-400 text-sm font-mono">
              Publicado: {new Date(leak.date).toLocaleDateString('es-MX', { year: 'numeric', month: 'long', day: 'numeric' })}
            </time>
          </div>
          
          <h1 class="text-3xl lg:text-5xl font-bold mb-6 leading-tight text-gray-100 font-sans">
            {leak.title}
          </h1>
          
          <p class="text-xl lg:text-2xl text-gray-300 leading-relaxed italic font-sans">
            {leak.summary}
          </p>
        </header>

        <!-- Verification notice -->
        <div class="card border-red-800 bg-red-950/20 mb-12">
          <div class="flex items-start gap-4">
            <span class="nf text-red-400 text-3xl lg:text-4xl flex-shrink-0">󰀪</span>
            <div>
              <h2 class="text-xl lg:text-2xl font-bold text-red-400 mb-4 font-sans">
                Información verificada por CORVUS
              </h2>
              <p class="text-gray-100 text-responsive leading-relaxed font-sans">
                Esta filtración ha sido recibida, verificada y procesada por el equipo de CORVUS siguiendo 
                estrictos protocolos de seguridad y verificación. Todos los archivos han sido auditados 
                y limpiados de metadatos para proteger a la fuente.
              </p>
            </div>
          </div>
        </div>

        <!-- Executive summary -->
        <section class="mb-12">
          <header class="mb-8">
            <div class="flex items-center gap-3 mb-4">
              <span class="nf text-blue-400 text-2xl lg:text-3xl">󰉺</span>
              <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
                Resumen ejecutivo
              </h2>
            </div>
          </header>
          
          <div class="card">
            <p class="text-gray-300 text-responsive leading-relaxed font-sans mb-6">
              Los documentos filtrados revelan un esquema sistemático de manipulación en procesos de 
              licitación de obras públicas federales durante el período 2024-2025. La evidencia incluye:
            </p>
            <ul class="space-y-4 text-gray-300 font-sans">
              <li class="flex items-start gap-3">
                <span class="nf text-blue-400 mt-1 flex-shrink-0">󰈙</span>
                <span><strong class="text-gray-100">Comunicaciones internas</strong> que muestran coordinación entre funcionarios y empresas privadas</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰈙</span>
                <span><strong class="text-gray-100">Documentos oficiales alterados</strong> para favorecer a contratistas específicos</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="nf text-green-400 mt-1 flex-shrink-0">󰖟</span>
                <span><strong class="text-gray-100">Registros financieros</strong> que evidencian transferencias irregulares</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="nf text-purple-400 mt-1 flex-shrink-0">󰍉</span>
                <span><strong class="text-gray-100">Testimonios internos</strong> de funcionarios que documentaron las irregularidades</span>
              </li>
            </ul>
          </div>
        </section>

        <!-- Evidence section -->
        <section class="mb-12">
          <header class="mb-8">
            <div class="flex items-center gap-3 mb-4">
              <span class="nf text-green-400 text-2xl lg:text-3xl">󰈙</span>
              <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
                Evidencias disponibles
              </h2>
            </div>
          </header>
          
          <div class="space-y-6">
            <!-- Main document -->
            <div class="card card-hover border-green-800 bg-green-950/10">
              <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6">
                <div class="flex items-start gap-4 flex-1">
                  <span class="nf text-green-400 text-3xl lg:text-4xl flex-shrink-0">󰈙</span>
                  <div class="flex-1">
                    <h3 class="text-lg lg:text-xl font-bold text-gray-100 mb-2 font-sans">
                      Documento principal
                    </h3>
                    <p class="text-gray-400 text-sm lg:text-base font-sans mb-4">
                      PDF • 2.3 MB • Comunicaciones oficiales y contratos
                    </p>
                    <p class="text-gray-300 text-responsive font-sans leading-relaxed">
                      Comunicaciones oficiales y contratos que evidencian la manipulación sistemática 
                      en procesos de licitación por un valor de $2,400 millones de pesos.
                    </p>
                  </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
                  <a 
                    href="/filtraciones/2025/evidencias/evidencia1.pdf" 
                    target="_blank" 
                    class="btn btn-primary group"
                  >
                    <span class="nf group-hover:scale-110 transition-transform">󰉼</span>
                    <span>Descargar PDF</span>
                  </a>
                  <button 
                    onclick="copyToClipboard('/filtraciones/2025/evidencias/evidencia1.pdf')"
                    class="btn btn-secondary group"
                  >
                    <span class="nf group-hover:scale-110 transition-transform">󰆏</span>
                    <span>Copiar enlace</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- Additional resources -->
            <div class="grid lg:grid-cols-2 gap-6">
              <!-- Torrent -->
              <div class="card card-hover border-blue-800 bg-blue-950/10">
                <div class="flex items-center gap-3 mb-4">
                  <span class="nf text-blue-400 text-2xl">󰖟</span>
                  <div>
                    <h3 class="text-lg font-bold text-gray-100 font-sans">Distribución P2P</h3>
                    <p class="text-gray-400 text-sm font-sans">Torrent • Archivo completo</p>
                  </div>
                </div>
                <p class="text-gray-300 text-sm font-sans mb-4 leading-relaxed">
                  Descarga distribuida de todos los archivos relacionados con el caso.
                </p>
                <a 
                  href="/filtraciones/2025/torrents/caso-001.torrent" 
                  target="_blank" 
                  class="btn btn-secondary w-full justify-center group"
                >
                  <span class="nf group-hover:scale-110 transition-transform">󰌾</span>
                  <span>Descargar Torrent</span>
                </a>
              </div>

              <!-- Hash verification -->
              <div class="card card-hover border-purple-800 bg-purple-950/10">
                <div class="flex items-center gap-3 mb-4">
                  <span class="nf text-purple-400 text-2xl">󰌾</span>
                  <div>
                    <h3 class="text-lg font-bold text-gray-100 font-sans">Verificación</h3>
                    <p class="text-gray-400 text-sm font-sans">SHA-256 • Integridad</p>
                  </div>
                </div>
                <p class="text-gray-300 text-sm font-sans mb-4 leading-relaxed">
                  Hashes criptográficos para verificar la integridad de los archivos.
                </p>
                <a 
                  href="/filtraciones/2025/hash.txt" 
                  target="_blank" 
                  class="btn btn-secondary w-full justify-center group"
                >
                  <span class="nf group-hover:scale-110 transition-transform">󰉺</span>
                  <span>Ver hashes</span>
                </a>
              </div>
            </div>
          </div>
        </section>

        <!-- Impact section -->
        <section class="mb-12">
          <header class="mb-8">
            <div class="flex items-center gap-3 mb-4">
              <span class="nf text-yellow-400 text-2xl lg:text-3xl">󰓎</span>
              <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
                Impacto y relevancia pública
              </h2>
            </div>
          </header>
          
          <div class="card">
            <div class="grid lg:grid-cols-2 gap-8">
              <div class="space-y-6">
                <div>
                  <h3 class="text-lg font-bold mb-3 text-green-400 font-sans flex items-center gap-2">
                    <span class="nf">󰖟</span>
                    Impacto económico
                  </h3>
                  <p class="text-gray-300 text-sm lg:text-base font-sans leading-relaxed">
                    Las irregularidades identificadas involucran contratos por un valor estimado de $2,400 millones de pesos.
                  </p>
                </div>
                <div>
                  <h3 class="text-lg font-bold mb-3 text-blue-400 font-sans flex items-center gap-2">
                    <span class="nf">󰔏</span>
                    Implicaciones legales
                  </h3>
                  <p class="text-gray-300 text-sm lg:text-base font-sans leading-relaxed">
                    Los documentos proporcionan evidencia de posibles violaciones a la Ley de Adquisiciones y Obras Públicas.
                  </p>
                </div>
              </div>
              <div class="space-y-6">
                <div>
                  <h3 class="text-lg font-bold mb-3 text-purple-400 font-sans flex items-center gap-2">
                    <span class="nf">󰍉</span>
                    Transparencia gubernamental
                  </h3>
                  <p class="text-gray-300 text-sm lg:text-base font-sans leading-relaxed">
                    Expone fallas sistemáticas en los mecanismos de control y supervisión de licitaciones públicas.
                  </p>
                </div>
                <div>
                  <h3 class="text-lg font-bold mb-3 text-yellow-400 font-sans flex items-center gap-2">
                    <span class="nf">󰀉</span>
                    Interés ciudadano
                  </h3>
                  <p class="text-gray-300 text-sm lg:text-base font-sans leading-relaxed">
                    La información permite a la ciudadanía conocer el uso de recursos públicos y exigir rendición de cuentas.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Methodology -->
        <section class="mb-12">
          <header class="mb-8">
            <div class="flex items-center gap-3 mb-4">
              <span class="nf text-purple-400 text-2xl lg:text-3xl">󰍉</span>
              <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
                Metodología de verificación
              </h2>
            </div>
          </header>
          
          <div class="card">
            <h3 class="text-lg font-bold mb-6 text-gray-100 font-sans">Proceso de validación CORVUS:</h3>
            <ol class="space-y-4 text-gray-300 font-sans">
              <li class="flex items-start gap-4">
                <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                  <span class="text-white font-bold text-sm">1</span>
                </div>
                <span><strong class="text-gray-100">Recepción segura:</strong> La información fue recibida a través de canales cifrados</span>
              </li>
              <li class="flex items-start gap-4">
                <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                  <span class="text-white font-bold text-sm">2</span>
                </div>
                <span><strong class="text-gray-100">Limpieza de metadatos:</strong> Todos los archivos fueron procesados para eliminar información identificable</span>
              </li>
              <li class="flex items-start gap-4">
                <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                  <span class="text-white font-bold text-sm">3</span>
                </div>
                <span><strong class="text-gray-100">Verificación cruzada:</strong> Los documentos fueron contrastados con registros públicos disponibles</span>
              </li>
              <li class="flex items-start gap-4">
                <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                  <span class="text-white font-bold text-sm">4</span>
                </div>
                <span><strong class="text-gray-100">Análisis forense:</strong> Se verificó la autenticidad técnica de los archivos digitales</span>
              </li>
              <li class="flex items-start gap-4">
                <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                  <span class="text-white font-bold text-sm">5</span>
                </div>
                <span><strong class="text-gray-100">Revisión editorial:</strong> El contenido fue evaluado por su relevancia e interés público</span>
              </li>
            </ol>
            <div class="mt-8 p-4 bg-blue-950/30 border border-blue-700 rounded-lg">
              <div class="flex items-start gap-3">
                <span class="nf text-blue-400 flex-shrink-0 mt-1">󰋼</span>
                <p class="text-blue-300 text-sm font-sans">
                  <strong>Nota:</strong> Siguiendo estándares periodísticos internacionales, no revelamos detalles 
                  específicos del proceso que puedan comprometer la seguridad de la fuente.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- Context -->
        <section class="mb-12">
          <header class="mb-8">
            <div class="flex items-center gap-3 mb-4">
              <span class="nf text-blue-400 text-2xl lg:text-3xl">󰈙</span>
              <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
                Contexto y seguimiento
              </h2>
            </div>
          </header>
          
          <div class="card">
            <p class="text-gray-300 text-responsive leading-relaxed font-sans mb-6">
              Esta filtración se enmarca en un contexto más amplio de preocupaciones ciudadanas sobre 
              la transparencia en el uso de recursos públicos. La información aquí presentada:
            </p>
            <ul class="space-y-3 text-gray-300 font-sans mb-6">
              <li class="flex items-start gap-3">
                <span class="nf text-blue-400 mt-1 flex-shrink-0">󰄬</span>
                <span>Complementa investigaciones periodísticas previas sobre el tema</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="nf text-green-400 mt-1 flex-shrink-0">󰄬</span>
                <span>Proporciona evidencia documental específica de irregularidades</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰄬</span>
                <span>Puede servir como base para investigaciones oficiales</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="nf text-purple-400 mt-1 flex-shrink-0">󰄬</span>
                <span>Contribuye al debate público sobre reforma en procesos de contratación</span>
              </li>
            </ul>
            <div class="p-4 bg-yellow-950/30 border border-yellow-700 rounded-lg">
              <div class="flex items-start gap-3">
                <span class="nf text-yellow-400 flex-shrink-0 mt-1">󰔛</span>
                <p class="text-yellow-300 text-sm font-sans">
                  <strong>Actualizaciones:</strong> Esta página se actualizará si se recibe información 
                  adicional relacionada con este caso.
                </p>
              </div>
            </div>
          </div>
        </section>
      </article>

      <!-- Related information CTA -->
      <aside class="max-w-4xl mx-auto">
        <div class="card border-green-800 bg-green-950/20 text-center">
          <div class="mb-6">
            <span class="nf text-green-400 text-4xl lg:text-6xl">󰌾</span>
          </div>
          <h2 class="text-2xl lg:text-3xl font-bold text-green-400 mb-4 font-sans">
            ¿Tienes información relacionada?
          </h2>
          <p class="text-gray-300 text-responsive leading-relaxed font-sans mb-8">
            Si posees documentos, testimonios o evidencias adicionales relacionadas con este caso 
            o situaciones similares, tu información puede ser valiosa para completar el panorama.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/guia" class="btn btn-primary text-lg px-8 py-4">
              <span class="nf text-xl">󰒃</span>
              <span>Cómo filtrar de forma segura</span>
            </a>
            <a href="/contacto" class="btn btn-secondary text-lg px-8 py-4">
              <span class="nf text-xl">󰌾</span>
              <span>Contacto cifrado</span>
            </a>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <Footer />
</Layout>

<script>
  function copyToClipboard(path) {
    const fullUrl = window.location.origin + path;
    navigator.clipboard.writeText(fullUrl).then(() => {
      const button = event.target.closest('button');
      if (button) {
        const originalText = button.innerHTML;
        button.innerHTML = '<span class="nf">󰄬</span><span>¡Copiado!</span>';
        setTimeout(() => {
          button.innerHTML = originalText;
        }, 2000);
      }
    }).catch(err => {
      console.error('Error al copiar: ', err);
    });
  }
</script>