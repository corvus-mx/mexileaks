---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const mirrors = [
  { 
    name: "Netlify principal", 
    url: "https://corvus-mexileaks.netlify.app/", 
    status: "activo",
    description: "Sitio principal en Netlify con CDN global",
    icon: "󰖟"
  },
  { 
    name: "GitHub Pages", 
    url: "https://corvus-mexileaks.github.io/", 
    status: "activo",
    description: "Mirror principal hospedado en GitHub Pages",
    icon: "󰊤"
  },
  { 
    name: "Mirror de respaldo", 
    url: "https://backup.corvus-mx.org/", 
    status: "standby",
    description: "Mirror de respaldo automático",
    icon: "󰆓"
  },
  { 
    name: "Hidden Service (.onion)", 
    url: "http://corvusxyz7h3k2l9.onion/", 
    onion: true,
    status: "desarrollo",
    description: "Acceso a través de la red Tor (próximamente)",
    icon: "󰕄"
  }
];
---

<Layout 
  title="Mirrors y acceso .onion | CORVUS MexiLeaks"
  description="Red distribuida de mirrors para garantizar acceso continuo a CORVUS MexiLeaks. Incluye acceso .onion para máxima privacidad."
>
  <Header showBackLink={true} />
  
  <main class="flex-1 py-8 lg:py-12">
    <div class="container">
      <!-- Hero section -->
      <header class="text-center mb-12 lg:mb-16">
        <div class="flex items-center justify-center gap-4 mb-6">
          <span class="nf text-blue-400 text-4xl lg:text-6xl">󰖟</span>
          <h1 class="text-3xl lg:text-5xl font-bold text-gray-100 font-sans">
            Red distribuida
          </h1>
        </div>
        <p class="text-xl lg:text-2xl text-gray-400 font-sans italic mb-4">
          Resistencia a la censura
        </p>
        <p class="text-gray-300 text-responsive leading-relaxed font-sans max-w-3xl mx-auto">
          Nuestra red distribuida garantiza que la información permanezca accesible aun frente a intentos de censura. 
          Si tumban uno, otros siguen vivos.
        </p>
      </header>

      <!-- Resistance message -->
      <div class="card border-blue-800 bg-blue-950/20 mb-12 max-w-4xl mx-auto">
        <div class="flex items-start gap-4">
          <span class="nf text-blue-400 text-3xl lg:text-4xl flex-shrink-0">󰒃</span>
          <div>
            <h2 class="text-xl lg:text-2xl font-bold text-blue-400 mb-4 font-sans">
              Resistencia a la censura
            </h2>
            <p class="text-gray-100 text-responsive leading-relaxed font-sans">
              La información que exponemos puede ser incómoda para algunos. Por eso mantenemos múltiples mirrors 
              y puntos de acceso para garantizar que la verdad siempre esté disponible para el pueblo mexicano.
            </p>
          </div>
        </div>
      </div>

      <!-- Mirrors list -->
      <section class="mb-16">
        <header class="text-center mb-12">
          <div class="flex items-center justify-center gap-3 mb-4">
            <span class="nf text-green-400 text-2xl lg:text-3xl">󰌾</span>
            <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
              Sitios espejo disponibles
            </h2>
          </div>
        </header>
        
        <div class="space-y-6 max-w-4xl mx-auto">
          {mirrors.map((mirror) => (
            <div class="card card-hover">
              <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6">
                <div class="flex items-start gap-4 flex-1">
                  <div class="flex-shrink-0">
                    <span class={`nf text-3xl lg:text-4xl ${
                      mirror.onion ? 'text-purple-400' : 
                      mirror.status === 'activo' ? 'text-green-400' :
                      mirror.status === 'standby' ? 'text-yellow-400' :
                      'text-gray-400'
                    }`}>
                      {mirror.icon}
                    </span>
                  </div>
                  <div class="flex-1">
                    <div class="flex flex-col sm:flex-row sm:items-center gap-3 mb-3">
                      <h3 class="text-lg lg:text-xl font-bold text-gray-100 font-sans">
                        {mirror.name}
                      </h3>
                      <span class={`px-3 py-1 rounded-full text-xs font-bold ${
                        mirror.status === 'activo' ? 'bg-green-600 text-white' :
                        mirror.status === 'standby' ? 'bg-yellow-600 text-white' :
                        'bg-gray-600 text-white'
                      }`}>
                        {mirror.status === 'activo' ? '🟢 Activo' :
                         mirror.status === 'standby' ? '🟡 Standby' :
                         '🔵 En desarrollo'}
                      </span>
                    </div>
                    <p class="text-gray-400 text-sm lg:text-base font-sans mb-4">
                      {mirror.description}
                    </p>
                    <div class="bg-gray-900 rounded-lg p-3 border border-gray-700">
                      <code class="text-gray-300 font-mono text-sm break-all">
                        {mirror.url}
                      </code>
                    </div>
                  </div>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
                  {mirror.status === 'activo' && (
                    <a 
                      href={mirror.url} 
                      target="_blank" 
                      rel="noopener noreferrer"
                      class="btn btn-primary group"
                    >
                      <span class="nf group-hover:scale-110 transition-transform">󰌾</span>
                      <span>Visitar sitio</span>
                    </a>
                  )}
                  <button 
                    onclick={`copyToClipboard('${mirror.url}')`}
                    class="btn btn-secondary group"
                  >
                    <span class="nf group-hover:scale-110 transition-transform">󰆏</span>
                    <span>Copiar URL</span>
                  </button>
                </div>
              </div>
              
              {mirror.onion && (
                <div class="mt-6 p-4 bg-purple-950/30 border border-purple-700 rounded-lg">
                  <div class="flex items-start gap-3">
                    <span class="nf text-purple-400 flex-shrink-0 mt-1">󰕄</span>
                    <div>
                      <p class="text-purple-300 font-semibold font-sans mb-2">Acceso .onion:</p>
                      <p class="text-gray-300 text-sm font-sans">
                        Requiere el navegador Tor para máxima privacidad y anonimato.
                        <a href="https://www.torproject.org/" target="_blank" class="text-purple-400 hover:text-purple-300 underline ml-1">
                          Descargar Tor Browser
                        </a>
                      </p>
                    </div>
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>
      </section>

      <!-- How to use mirrors -->
      <section class="mb-16">
        <header class="text-center mb-8">
          <div class="flex items-center justify-center gap-3 mb-4">
            <span class="nf text-yellow-400 text-2xl lg:text-3xl">󰒓</span>
            <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
              Cómo usar los mirrors
            </h2>
          </div>
        </header>
        
        <div class="card max-w-4xl mx-auto">
          <div class="grid lg:grid-cols-2 gap-8">
            <div>
              <h3 class="text-lg lg:text-xl font-bold mb-4 text-blue-400 font-sans flex items-center gap-2">
                <span class="nf">󰖟</span>
                Sitios web normales
              </h3>
              <ul class="space-y-3 text-gray-300 font-sans text-sm lg:text-base">
                <li class="flex items-start gap-3">
                  <span class="nf text-green-400 mt-1 flex-shrink-0">󰄬</span>
                  <span>Acceso directo desde cualquier navegador</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-green-400 mt-1 flex-shrink-0">󰄬</span>
                  <span>Funcionan con conexiones normales a internet</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-green-400 mt-1 flex-shrink-0">󰄬</span>
                  <span>Ideales para consulta general de información</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-green-400 mt-1 flex-shrink-0">󰄬</span>
                  <span>Respaldados automáticamente</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-lg lg:text-xl font-bold mb-4 text-purple-400 font-sans flex items-center gap-2">
                <span class="nf">󰕄</span>
                Servicios .onion
              </h3>
              <ul class="space-y-3 text-gray-300 font-sans text-sm lg:text-base">
                <li class="flex items-start gap-3">
                  <span class="nf text-purple-400 mt-1 flex-shrink-0">󰕄</span>
                  <span>Requieren Tor Browser para acceder</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-purple-400 mt-1 flex-shrink-0">󰒃</span>
                  <span>Máxima privacidad y anonimato</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-purple-400 mt-1 flex-shrink-0">󰌾</span>
                  <span>Resistentes a censura y bloqueos</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-purple-400 mt-1 flex-shrink-0">󰔏</span>
                  <span>Recomendados para fuentes sensibles</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Contribute section -->
      <section class="mb-16">
        <header class="text-center mb-8">
          <div class="flex items-center justify-center gap-3 mb-4">
            <span class="nf text-green-400 text-2xl lg:text-3xl">󰐱</span>
            <h2 class="text-2xl lg:text-3xl font-bold text-gray-100 font-sans">
              Contribuir con la red
            </h2>
          </div>
        </header>
        
        <div class="card max-w-4xl mx-auto">
          <p class="text-gray-300 text-responsive leading-relaxed font-sans mb-8 text-center">
            ¿Quieres ayudar a mantener la información libre y accesible? Puedes contribuir hospedando un mirror 
            de CORVUS MexiLeaks en tu propia infraestructura.
          </p>
          
          <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <div>
              <h3 class="text-lg lg:text-xl font-bold mb-4 text-blue-400 font-sans flex items-center gap-2">
                <span class="nf">󰉺</span>
                Requisitos técnicos
              </h3>
              <ul class="space-y-3 text-gray-300 font-sans text-sm lg:text-base">
                <li class="flex items-start gap-3">
                  <span class="nf text-blue-400 mt-1 flex-shrink-0">󰌾</span>
                  <span>Hosting web con HTTPS</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-green-400 mt-1 flex-shrink-0">󰔛</span>
                  <span>Compromiso de mantenerlo actualizado</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰔏</span>
                  <span>Respeto por la integridad del contenido</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-lg lg:text-xl font-bold mb-4 text-purple-400 font-sans flex items-center gap-2">
                <span class="nf">󰒃</span>
                Proceso seguro
              </h3>
              <ul class="space-y-3 text-gray-300 font-sans text-sm lg:text-base">
                <li class="flex items-start gap-3">
                  <span class="nf text-green-400 mt-1 flex-shrink-0">󰇮</span>
                  <span>Contacto inicial por ProtonMail cifrado</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-blue-400 mt-1 flex-shrink-0">󰔏</span>
                  <span>Verificación de identidad y motivaciones</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰒓</span>
                  <span>Instrucciones detalladas de configuración</span>
                </li>
              </ul>
            </div>
          </div>
          
          <div class="text-center">
            <a href="/contacto" class="btn btn-primary text-lg px-8 py-4">
              <span class="nf text-xl">󰌾</span>
              <span>Contactar para contribuir</span>
            </a>
          </div>
        </div>
      </section>

      <!-- Verification section -->
      <section>
        <div class="card border-yellow-800 bg-yellow-950/20 max-w-4xl mx-auto">
          <div class="flex items-start gap-4 mb-6">
            <span class="nf text-yellow-400 text-3xl lg:text-4xl flex-shrink-0">󰀪</span>
            <div>
              <h2 class="text-xl lg:text-2xl font-bold text-yellow-400 mb-4 font-sans">
                Verificación de autenticidad
              </h2>
              <p class="text-gray-300 text-responsive leading-relaxed font-sans mb-6">
                Para verificar que estás accediendo a un mirror oficial de CORVUS MexiLeaks, 
                busca estos elementos de autenticidad:
              </p>
              <ul class="space-y-3 text-gray-300 font-sans text-sm lg:text-base">
                <li class="flex items-start gap-3">
                  <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰄬</span>
                  <span>Diseño visual idéntico con colores y tipografía oficial</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰇮</span>
                  <span>Misma información de contacto (corvusleaks@protonmail.com)</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰌾</span>
                  <span>Certificado SSL válido y conexión HTTPS</span>
                </li>
                <li class="flex items-start gap-3">
                  <span class="nf text-yellow-400 mt-1 flex-shrink-0">󰔏</span>
                  <span>Contenido actualizado y coherente</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <Footer />
</Layout>

<script>
  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
      // Find the button that was clicked
      const button = event.target.closest('button');
      if (button) {
        const originalText = button.innerHTML;
        button.innerHTML = '<span class="nf">󰄬</span><span>¡Copiado!</span>';
        setTimeout(() => {
          button.innerHTML = originalText;
        }, 2000);
      }
    }).catch(err => {
      console.error('Error al copiar: ', err);
    });
  }
</script>