---
interface Props {
  title: string;
  date: string;
  summary: string;
  url: string;
  category?: string;
  verified?: boolean;
}

const { title, date, summary, url, category = "Filtración", verified = true } = Astro.props;

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('es-MX', { 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric' 
  });
};

const getCategoryIcon = (cat: string) => {
  switch (cat.toLowerCase()) {
    case 'corrupción': return '󰖟';
    case 'transparencia': return '󰔏';
    case 'derechos': return '󰀉';
    default: return '󰈙';
  }
};
---

<article class="card card-hover group animate-fade-in-up">
  <!-- Header with category and verification -->
  <header class="flex flex-wrap items-center justify-between gap-3 mb-4">
    <div class="flex items-center gap-3">
      <div class="flex items-center gap-2 bg-red-600 text-white px-3 py-1.5 rounded-full">
        <span class="nf text-sm">{getCategoryIcon(category)}</span>
        <span class="text-xs lg:text-sm font-bold uppercase tracking-wide">{category}</span>
      </div>
      {verified && (
        <div class="flex items-center gap-1 bg-green-600 text-white px-2 py-1 rounded-full">
          <span class="nf text-xs">󰄬</span>
          <span class="text-xs font-bold">Verificado</span>
        </div>
      )}
    </div>
    <time class="text-gray-400 text-xs lg:text-sm font-mono">
      {formatDate(date)}
    </time>
  </header>
  
  <!-- Content -->
  <div class="mb-6">
    <h3 class="text-lg lg:text-xl font-bold text-gray-100 mb-3 leading-tight font-sans group-hover:text-red-400 transition-colors">
      <a href={url} class="no-underline">
        {title}
      </a>
    </h3>
    
    <p class="text-gray-300 text-responsive leading-relaxed font-sans">
      {summary}
    </p>
  </div>
  
  <!-- Footer with actions -->
  <footer class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 pt-4 border-t border-gray-800">
    <div class="flex items-center gap-4 text-xs lg:text-sm text-gray-400">
      <div class="flex items-center gap-1">
        <span class="nf">󰈙</span>
        <span>Evidencias</span>
      </div>
      <div class="flex items-center gap-1">
        <span class="nf">󰌾</span>
        <span>Cifrado</span>
      </div>
      <div class="flex items-center gap-1">
        <span class="nf">󰖟</span>
        <span>P2P</span>
      </div>
    </div>
    
    <a 
      href={url} 
      class="btn btn-primary group/btn text-sm"
    >
      <span>Leer más</span>
      <span class="nf group-hover/btn:translate-x-1 transition-transform">󰁍</span>
    </a>
  </footer>
</article>

<style>
  article {
    position: relative;
    overflow: hidden;
  }

  article::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent-red), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  article:hover::before {
    opacity: 1;
  }
</style>